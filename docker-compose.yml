version: '3.8'

services:
  # Only for development
  database:
    image: mysql:8
    container_name: database
    ports:
      # Only for dev
      - 3306:3306
    volumes:
      # Persist data do ./mysql-data. Remove if you want to clear the db.
      - ./mysql-data:/var/lib/mysql
    environment:
      MYSQL_DATABASE: starchart
      MYSQL_USER: starchart
      MYSQL_PASSWORD: starchart_password
      MYSQL_ROOT_PASSWORD: root_password

  # Mock Route53 server for testing, see:
  # http://docs.getmoto.org/en/latest/docs/server_mode.html
  #
  # AWS Endpoint URL: http://localhost:5053
  # Dashboard URL: http://localhost:5053/moto-api
  # Reset URL: POST to http://localhost:5053/moto-api/reset
  dns:
    container_name: route53_mock
    image: motoserver/moto:4.1.1
    ports:
      - '5053:5000'
